(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1709:(e,s,t)=>{Promise.resolve().then(t.bind(t,1592))},1592:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>e4});var a=t(5155),r=t(2115),n=t(2651),o=t(2818);let l=o.env.NEXT_PUBLIC_API_URL||"http://localhost:3000/api/v1";console.log("\uD83D\uDD27 API Configuration:"),console.log("\uD83D\uDCCD Base URL:",l),console.log("\uD83C\uDF0D Environment:","production"),console.log("\uD83D\uDCDD Next Public API URL:",o.env.NEXT_PUBLIC_API_URL);let i=n.A.create({baseURL:l,timeout:6e4,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1});i.interceptors.request.use(e=>{var s;return console.log("\uD83D\uDD0D Request Debug:"),console.log("\uD83D\uDCCD URL:",e.url),console.log("\uD83C\uDF10 Base URL:",e.baseURL),console.log("\uD83C\uDFAF Full URL:","".concat(e.baseURL).concat(e.url)),console.log("\uD83D\uDCDD Method:",null===(s=e.method)||void 0===s?void 0:s.toUpperCase()),e},e=>(console.error("❌ Request Error:",e),Promise.reject(e))),i.interceptors.response.use(e=>(console.log("✅ Response Success:",e.status,e.config.url),e),e=>{var s,t,a,r,n,o;return console.error("❌ Response Error:"),console.error("\uD83D\uDCCD URL:",null===(s=e.config)||void 0===s?void 0:s.url),console.error("\uD83C\uDF10 Base URL:",null===(t=e.config)||void 0===t?void 0:t.baseURL),console.error("\uD83C\uDFAF Full URL:","".concat(null===(a=e.config)||void 0===a?void 0:a.baseURL).concat(null===(r=e.config)||void 0===r?void 0:r.url)),console.error("\uD83D\uDCCA Status:",null===(n=e.response)||void 0===n?void 0:n.status),console.error("\uD83D\uDCC4 Response:",null===(o=e.response)||void 0===o?void 0:o.data),Promise.reject(e)});class c{static async uploadFile(e){let s=new FormData;s.append("file",e);try{console.log("\uD83D\uDE80 Starting file upload:"),console.log("\uD83D\uDCC4 File:",e.name,"Size:",e.size,"Type:",e.type),console.log("\uD83C\uDF10 Using proxy endpoint: /api/v1/scraping-batch");let t=await fetch("/api/v1/scraping-batch",{method:"POST",body:s});if(!t.ok){let e=await t.text();throw console.error("Upload failed:",t.status,e),Error("HTTP ".concat(t.status,": ").concat(e))}let a=await t.json();return console.log("Upload successful:",a),a}catch(e){var t,a,r,n,o,l,i,c;if(e.message,e.code,null===(t=e.response)||void 0===t||t.status,null===(a=e.response)||void 0===a||a.statusText,null===(r=e.response)||void 0===r||r.data,"ECONNREFUSED"===e.code||"ENOTFOUND"===e.code)throw Error("❌ Backend server is not running on port 3000. Please start your backend server with: docker-compose up --build -d");if("ECONNABORTED"===e.code)throw Error("⏱️ Upload timeout - file too large or connection slow");if((null===(n=e.response)||void 0===n?void 0:n.status)===413)throw Error("\uD83D\uDCE6 File too large");if((null===(o=e.response)||void 0===o?void 0:o.status)===415)throw Error("\uD83D\uDCC4 Invalid file type - only CSV files are allowed");else if(null===(l=e.message)||void 0===l?void 0:l.includes("HTTP 404"))throw Error("\uD83D\uDD0D Backend endpoint not found. Make sure backend is running and accessible.");else if(null===(i=e.message)||void 0===i?void 0:i.includes("CORS"))throw Error("\uD83C\uDF10 CORS Error: Backend needs CORS configuration. The backend is running but blocking browser requests.");else if(null===(c=e.message)||void 0===c?void 0:c.includes("Failed to fetch"))throw Error("\uD83D\uDD12 Connection blocked - possible CORS issue. Backend is running but not accessible from browser.");else throw Error("\uD83D\uDEAB Upload failed: ".concat(e.message))}}static async getBatchStatus(e){try{let s=await fetch("/api/v1/scraping-batch/".concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){if(404===s.status)throw Error("❓ Batch not found. It may have expired or been processed.");throw Error("HTTP ".concat(s.status,": Failed to fetch batch status"))}return await s.json()}catch(e){throw Error("Failed to fetch batch status: ".concat(e.message))}}static async exportCleanCSV(e){try{console.log("\uD83C\uDFAF Starting CSV export for batch:",e);let s=await i.get("/scraping-batch/".concat(e,"/export"),{responseType:"blob",headers:{Accept:"text/csv"},timeout:6e4}),t=new Blob([s.data],{type:"text/csv;charset=utf-8;"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a;let n=new Date().toISOString().slice(0,19).replace(/:/g,"-");r.download="scraping-results-".concat(n,".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),console.log("✅ CSV exported successfully")}catch(e){var s,t,a,r;if((null===(s=e.response)||void 0===s?void 0:s.status)===404)throw Error("❓ Batch not found or expired");if((null===(t=e.response)||void 0===t?void 0:t.status)===400)throw Error("\uD83D\uDEAB Batch not ready for export yet");throw Error("\uD83D\uDEAB Export failed: ".concat((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||e.message))}}static async validateCSV(e,s){return new Promise(t=>{let a=new FileReader;a.onload=e=>{var a;let r=(null===(a=e.target)||void 0===a?void 0:a.result).split("\n").filter(e=>e.trim());if(0===r.length){t({isValid:!1,errors:[s?s("csv.file_empty"):"File is empty"],warnings:[],rowCount:0,columns:[],requiredColumns:["name","address","city"],missingColumns:["name","address","city"]});return}let n=r[0].split(",").map(e=>e.trim().replace(/["']/g,"")),o=["name","address","city"];[...o];let l=[],i=[],c=o.filter(e=>!n.some(s=>s.toLowerCase().includes(e.toLowerCase())));c.length>0&&l.push(s?s("csv.required_columns_missing",{columns:c.join(", ")}):"Missing required columns: ".concat(c.join(", "))),r.length<2&&l.push(s?s("csv.minimum_rows_required"):"CSV must have at least one data row besides the header"),r.length>1001&&i.push(s?s("csv.maximum_rows_warning",{count:r.length-1}):"File has ".concat(r.length-1," rows. Maximum 1000 recommended for better performance")),r.slice(1,6).forEach((e,t)=>{let a=e.split(",");a.length!==n.length&&l.push(s?s("csv.column_mismatch",{row:t+2,actual:a.length,expected:n.length}):"Row ".concat(t+2,": Number of columns does not match header (").concat(a.length," vs ").concat(n.length,")"));let r=n.findIndex(e=>e.toLowerCase().includes("name"));r>=0&&(!a[r]||""===a[r].trim().replace(/["']/g,""))&&l.push(s?s("csv.empty_business_name",{row:t+2}):"Row ".concat(t+2,": Business name cannot be empty"))}),t({isValid:0===l.length,errors:l,warnings:i,rowCount:r.length-1,columns:n,requiredColumns:o,missingColumns:c})},a.onerror=()=>{t({isValid:!1,errors:[s?s("csv.file_read_error"):"Error reading file"],warnings:[],rowCount:0,columns:[],requiredColumns:["name","address","city"],missingColumns:["name","address","city"]})},a.readAsText(e)})}static downloadCSVTemplate(){let e=new Blob(['name,address,city,postal_code\nMcDonald\'s Bahnhofstrasse,"Bahnhofstrasse 120",Z\xfcrich,8001\nStarbucks Paradeplatz,"Paradeplatz 4",Z\xfcrich,8001\nBurger King Limmatquai,"Limmatquai 66",Z\xfcrich,8001'],{type:"text/csv;charset=utf-8;"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="plantilla-scraping.csv",document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(s),console.log("✅ Plantilla CSV descargada")}static async checkServicesStatus(){let e={api:{status:"unhealthy",service:"api"},redis:{status:"unhealthy",service:"redis"},worker:{status:"unhealthy",service:"worker"},lastCheck:new Date().toISOString(),error:void 0};try{let s=Date.now(),t=await fetch("/api/v1/health",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(t.ok){let a=await t.json();e.api={status:"healthy",service:"api",responseTime:"".concat(Date.now()-s,"ms"),details:a};try{let s=await fetch("/api/v1/health/redis",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.ok){let t=await s.json();e.redis={status:t.status,service:"redis",responseTime:t.responseTime,details:t}}else e.redis={status:"unhealthy",service:"redis",reason:"HTTP ".concat(s.status)}}catch(s){e.redis={status:"unhealthy",service:"redis",reason:"Connection failed"}}try{let s=await fetch("/api/v1/health/worker",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.ok){let t=await s.json();e.worker={status:t.status,service:"worker",responseTime:t.responseTime,reason:t.reason,details:t}}else e.worker={status:"unhealthy",service:"worker",reason:"HTTP ".concat(s.status)}}catch(s){e.worker={status:"unhealthy",service:"worker",reason:"Connection failed"}}}else e.api={status:"unhealthy",service:"api",reason:"HTTP ".concat(t.status),responseTime:"".concat(Date.now()-s,"ms")}}catch(s){e.error=s.message,e.api={status:"unhealthy",service:"api",reason:s.message},console.error("Error checking services:",s)}return e}static async healthCheck(){try{var e;let s=n.A.create({timeout:5e3}),t=await s.get("/api/v1/health");return console.log("✅ Backend health check successful:",t.status,t.data),(null===(e=t.data)||void 0===e?void 0:e.status)==="ok"}catch(e){return console.log("\uD83D\uDD34 Backend health check failed"),console.log("Error details:",e.message),!1}}}var d=t(2317),u=t(1027),m=t(3463),p=t(9795);function g(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,p.QP)((0,m.$)(s))}let h=(0,u.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),f=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:o=!1,...l}=e,i=o?d.DX:"button";return(0,a.jsx)(i,{className:g(h({variant:r,size:n,className:t})),ref:s,...l})});f.displayName="Button";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:g("rounded-xl border bg-card text-card-foreground shadow",t),...r})});x.displayName="Card";let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:g("flex flex-col space-y-1.5 p-6",t),...r})});v.displayName="CardHeader";let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:g("font-semibold leading-none tracking-tight",t),...r})});b.displayName="CardTitle";let _=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:g("text-sm text-muted-foreground",t),...r})});_.displayName="CardDescription";let w=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:g("p-6 pt-0",t),...r})});w.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:g("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";let y=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:g("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});y.displayName="Input";var j=t(6195);let N=(0,u.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),S=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(j.b,{ref:s,className:g(N(),t),...r})});S.displayName=j.b.displayName;let C=(0,u.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function k(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:g(C({variant:t}),s),...r})}var D=t(8684),A=t(3239),E=t(4857),R=t(4081),F=t(3950),T=t(8617),P=t(579);let z={en:{title:"Web Scraping Tool",subtitle:"Upload your CSV file and get enhanced business data","error.upload":"Failed to upload file. Please check the file and try again.","error.processing":"An error occurred while processing your file.",start_scraping:"Start Scraping",search_placeholder:"Search for businesses...",location_placeholder:"Enter location",city_label:"City",results_found:"results found",no_results:"No results found",error_loading:"Error loading results",loading:"Loading...",stop_scraping:"Stop Scraping",progress:"Progress",name:"Name",rating:"Rating",rating_count:"Reviews",phone:"Phone",address:"Address",website:"Website",price_range:"Price Range",category:"Category",monday_hours:"Monday",tuesday_hours:"Tuesday",wednesday_hours:"Wednesday",thursday_hours:"Thursday",friday_hours:"Friday",saturday_hours:"Saturday",sunday_hours:"Sunday",view_details:"View Details",completion_time:"Completion Time",results_statistics:"Results Statistics",success_rate:"Success Rate",processing_errors:"Processing Errors",data_quality:"Data Quality",performance_metrics:"Performance Metrics",completion_details:"Completion Details",successful_results:"Successful",failed_results:"Failed",google_errors:"Google Errors",network_errors:"Network Errors",parsing_errors:"Parsing Errors",timeout_errors:"Timeout Errors",avg_processing_time:"Avg Processing Time",total_processing_time:"Total Processing Time",complete_profiles:"Complete Profiles",partial_profiles:"Partial Profiles",missing_data:"Missing Data",invalid_format:"Invalid Format",results_breakdown:"Results Breakdown",error_breakdown:"Error Breakdown",language_selector:"Language",backend_services_status:"Backend Services Status",up:"Up",down:"Down",start_backend:"Start backend",api_running_redis_worker_unknown:"API is running but Redis/Worker status unknown.",check_docker_compose:"Check",processing_complete:"Processing Complete!",successfully_processed:"Successfully processed",businesses_with:"businesses with",success_rate_with_details:"success rate",successful:"successful",failed:"failed",view_detailed_results:"View Detailed Results","upload.title":"Upload CSV File","upload.description":"Select a CSV file containing business information to process and enhance.","upload.selectFile":"Select CSV File","upload.button":"Process File","upload.uploading":"Uploading file...",download_csv:"Download CSV",upload_another_csv:"Upload Another CSV",export_results:"Export Results","results.title":"Results","table.entries":"entries","table.search":"Search...","table.noResults":"No results found.","table.rowsPerPage":"Rows per page","table.page":"Page","table.of":"of","table.showing":"Showing","processing.status":"Processing Status","processing.progress":"Processing {completed} of {total}...","processing.button":"Processing...","error.title":"Error","error.retry":"Retry","table.input_name":"Input Name","table.found_name":"Found Name","table.input_address":"Input Address","table.found_phone":"Found Phone","table.found_website":"Found Website","table.found_on_maps":"Found on Google Maps","table.input_data":"Input","table.normalized":"Normalized","csv.file_empty":"File is empty","csv.minimum_rows_required":"CSV must have at least one data row besides the header","csv.maximum_rows_warning":"File has {count} rows. Maximum 1000 recommended for better performance","csv.column_mismatch":"Row {row}: Number of columns does not match header ({actual} vs {expected})","csv.required_columns_missing":"Missing required columns: {columns}","csv.empty_business_name":"Row {row}: Business name cannot be empty","csv.file_read_error":"Error reading file","csv.download_template":"Download CSV Template","csv.validating":"Validating...","csv.valid":"Valid","csv.invalid":"Invalid","csv.rows_data":"rows of data","csv.errors":"Errors:","csv.warnings":"Warnings:","csv.columns_detected":"Detected columns:","csv.invalid_file":"Invalid File","csv.validation_error":"Error validating file","csv.required_columns_info":"Required columns: {columns}. Optional: {optional}","csv.required_columns":"Required columns","csv.optional":"Optional","csv.utf8_support":"✓ UTF-8 support for special characters (\xe4, \xf6, \xfc, \xe9, \xe0, \xf1, etc.)","gps.latitude":"Latitude","gps.longitude":"Longitude","gps.coordinates":"GPS Coordinates","gps.view_on_maps":"View on Google Maps","processing.records_processed":"{completed} of {total} records processed","time.seconds_ago":"{seconds} seconds ago","time.minutes_ago":"{minutes} minutes ago","time.never":"Never","status.connected":"Connected","status.disconnected":"Disconnected","status.last_check":"Last check:","status.error_connecting":"Error connecting to backend","status.start_backend_instruction":"Start backend:","status.partial_services":"API running but dependent services might be disconnected","status.all_services_ok":"All services running correctly","status.degraded":"Degraded","status.response_time":"Response time","status.queue_stats":"Queue stats","status.recent_activity":"Recent activity","status.connection":"Connection","status.queue_access":"Queue Access","status.active_jobs":"Active Jobs","status.completed_jobs":"Completed","status.waiting_jobs":"Waiting","status.failed_jobs":"Failed","status.last_job_time":"Last Job Time","status.accessible":"Accessible","status.blocked":"Blocked","results.success_rate_good":"Good","results.success_rate_fair":"Fair","results.success_rate_low":"Low","results.industry_average":"Industry average: ~50%","results.complete_data_extracted":"Complete data extracted","results.no_data_found":"No data found","results.businesses_searched":"Businesses searched","results.google_maps_queries":"Google Maps queries","results.error_analysis":"Error Analysis","results.not_found_on_maps":"Not found on Google Maps","results.all_strategies_failed":"All search strategies failed","results.other_errors":"Other errors","results.success_tip":"Success rates vary by business type and location accuracy. More specific addresses typically yield better results.","results.download_clean_csv":"Download Clean CSV"},fr:{title:"Outil de Web Scraping",subtitle:"T\xe9l\xe9chargez votre fichier CSV et obtenez des donn\xe9es d'entreprise am\xe9lior\xe9es","error.upload":"\xc9chec du t\xe9l\xe9chargement du fichier. Veuillez v\xe9rifier le fichier et r\xe9essayer.","error.processing":"Une erreur s'est produite lors du traitement de votre fichier.",start_scraping:"D\xe9marrer le Scraping",search_placeholder:"Rechercher des entreprises...",location_placeholder:"Entrer l'emplacement",city_label:"Ville",results_found:"r\xe9sultats trouv\xe9s",no_results:"Aucun r\xe9sultat trouv\xe9",error_loading:"Erreur lors du chargement des r\xe9sultats",loading:"Chargement...",stop_scraping:"Arr\xeater le Scraping",progress:"Progr\xe8s",name:"Nom",rating:"Note",rating_count:"Avis",phone:"T\xe9l\xe9phone",address:"Adresse",website:"Site Web",price_range:"Gamme de Prix",category:"Cat\xe9gorie",monday_hours:"Lundi",tuesday_hours:"Mardi",wednesday_hours:"Mercredi",thursday_hours:"Jeudi",friday_hours:"Vendredi",saturday_hours:"Samedi",sunday_hours:"Dimanche",view_details:"Voir les D\xe9tails",completion_time:"Temps d'Ach\xe8vement",results_statistics:"Statistiques des R\xe9sultats",success_rate:"Taux de R\xe9ussite",processing_errors:"Erreurs de Traitement",data_quality:"Qualit\xe9 des Donn\xe9es",performance_metrics:"M\xe9triques de Performance",completion_details:"D\xe9tails d'Ach\xe8vement",successful_results:"R\xe9ussis",failed_results:"\xc9chou\xe9s",google_errors:"Erreurs Google",network_errors:"Erreurs R\xe9seau",parsing_errors:"Erreurs d'Analyse",timeout_errors:"Erreurs de D\xe9lai",avg_processing_time:"Temps de Traitement Moyen",total_processing_time:"Temps de Traitement Total",complete_profiles:"Profils Complets",partial_profiles:"Profils Partiels",missing_data:"Donn\xe9es Manquantes",invalid_format:"Format Invalide",results_breakdown:"R\xe9partition des R\xe9sultats",error_breakdown:"R\xe9partition des Erreurs",language_selector:"Langue",backend_services_status:"\xc9tat des Services Backend",up:"En marche",down:"Arr\xeat\xe9",start_backend:"D\xe9marrer le backend",api_running_redis_worker_unknown:"L'API fonctionne mais l'\xe9tat Redis/Worker est inconnu.",check_docker_compose:"V\xe9rifier",processing_complete:"Traitement Termin\xe9!",successfully_processed:"Trait\xe9 avec succ\xe8s",businesses_with:"entreprises avec",success_rate_with_details:"taux de r\xe9ussite",successful:"r\xe9ussi",failed:"\xe9chou\xe9",view_detailed_results:"Voir les R\xe9sultats D\xe9taill\xe9s","upload.title":"T\xe9l\xe9charger un Fichier CSV","upload.description":"S\xe9lectionnez un fichier CSV contenant des informations d'entreprise \xe0 traiter et am\xe9liorer.","upload.selectFile":"S\xe9lectionner un Fichier CSV","upload.button":"Traiter le Fichier","upload.uploading":"T\xe9l\xe9chargement du fichier...",download_csv:"T\xe9l\xe9charger CSV",upload_another_csv:"T\xe9l\xe9charger un Autre CSV",export_results:"Exporter les R\xe9sultats","results.title":"R\xe9sultats","table.entries":"entr\xe9es","table.search":"Rechercher...","table.noResults":"Aucun r\xe9sultat trouv\xe9.","table.rowsPerPage":"Lignes par page","table.page":"Page","table.of":"de","table.showing":"Affichage","processing.status":"Statut du traitement","processing.progress":"Traitement de {completed} sur {total}...","processing.button":"Traitement...","error.title":"Erreur","error.retry":"R\xe9essayer","table.input_name":"Nom de saisie","table.found_name":"Nom trouv\xe9","table.input_address":"Adresse de saisie","table.found_phone":"T\xe9l\xe9phone trouv\xe9","table.found_website":"Site Web trouv\xe9","table.found_on_maps":"Trouv\xe9 sur Google Maps","table.input_data":"Saisie","table.normalized":"Normalis\xe9","csv.file_empty":"Le fichier est vide","csv.minimum_rows_required":"Le CSV doit avoir au moins une ligne de donn\xe9es en plus de l'en-t\xeate","csv.maximum_rows_warning":"Le fichier a {count} lignes. Maximum 1000 recommand\xe9 pour de meilleures performances","csv.column_mismatch":"Ligne {row} : Le nombre de colonnes ne correspond pas \xe0 l'en-t\xeate ({actual} contre {expected})","csv.required_columns_missing":"Colonnes requises manquantes : {columns}","csv.empty_business_name":"Ligne {row} : Le nom de l'entreprise ne peut pas \xeatre vide","csv.file_read_error":"Erreur lors de la lecture du fichier","csv.download_template":"T\xe9l\xe9charger le Mod\xe8le CSV","csv.validating":"Validation...","csv.valid":"Valide","csv.invalid":"Invalide","csv.rows_data":"lignes de donn\xe9es","csv.errors":"Erreurs :","csv.warnings":"Avertissements :","csv.columns_detected":"Colonnes d\xe9tect\xe9es :","csv.invalid_file":"Fichier Invalide","csv.validation_error":"Erreur de validation du fichier","csv.required_columns_info":"Colonnes requises : {columns}. Optionnel : {optional}","csv.required_columns":"Colonnes requises","csv.optional":"Optionnel","csv.utf8_support":"✓ Support UTF-8 pour les caract\xe8res sp\xe9ciaux (\xe4, \xf6, \xfc, \xe9, \xe0, \xf1, etc.)","gps.latitude":"Latitude","gps.longitude":"Longitude","gps.coordinates":"Coordonn\xe9es GPS","gps.view_on_maps":"Voir sur Google Maps","processing.records_processed":"{completed} sur {total} enregistrements trait\xe9s","time.seconds_ago":"il y a {seconds} secondes","time.minutes_ago":"il y a {minutes} minutes","time.never":"Jamais","status.connected":"Connect\xe9","status.disconnected":"D\xe9connect\xe9","status.last_check":"Derni\xe8re v\xe9rification :","status.error_connecting":"Erreur de connexion au backend","status.start_backend_instruction":"D\xe9marrer le backend :","status.partial_services":"L'API fonctionne mais les services d\xe9pendants pourraient \xeatre d\xe9connect\xe9s","status.all_services_ok":"Tous les services fonctionnent correctement","status.degraded":"D\xe9grad\xe9","status.response_time":"Temps de r\xe9ponse","status.queue_stats":"Stats de la file","status.recent_activity":"Activit\xe9 r\xe9cente","status.connection":"Connexion","status.queue_access":"Acc\xe8s File","status.active_jobs":"T\xe2ches Actives","status.completed_jobs":"Termin\xe9es","status.waiting_jobs":"En Attente","status.failed_jobs":"\xc9chou\xe9es","status.last_job_time":"Temps Dernier Job","status.accessible":"Accessible","status.blocked":"Bloqu\xe9","results.success_rate_good":"Bon","results.success_rate_fair":"Correct","results.success_rate_low":"Faible","results.industry_average":"Moyenne de l'industrie : ~50%","results.complete_data_extracted":"Donn\xe9es compl\xe8tes extraites","results.no_data_found":"Aucune donn\xe9e trouv\xe9e","results.businesses_searched":"Entreprises recherch\xe9es","results.google_maps_queries":"Requ\xeates Google Maps","results.error_analysis":"Analyse des Erreurs","results.not_found_on_maps":"Non trouv\xe9 sur Google Maps","results.all_strategies_failed":"Toutes les strat\xe9gies de recherche ont \xe9chou\xe9","results.other_errors":"Autres erreurs","results.success_tip":"Les taux de r\xe9ussite varient selon le type d'entreprise et la pr\xe9cision de l'emplacement. Des adresses plus sp\xe9cifiques donnent g\xe9n\xe9ralement de meilleurs r\xe9sultats.","results.download_clean_csv":"T\xe9l\xe9charger CSV Propre"},de:{title:"Web Scraping Tool",subtitle:"Laden Sie Ihre CSV-Datei hoch und erhalten Sie erweiterte Unternehmensdaten","error.upload":"Fehler beim Hochladen der Datei. Bitte \xfcberpr\xfcfen Sie die Datei und versuchen Sie es erneut.","error.processing":"Bei der Verarbeitung Ihrer Datei ist ein Fehler aufgetreten.",start_scraping:"Scraping Starten",search_placeholder:"Nach Unternehmen suchen...",location_placeholder:"Standort eingeben",city_label:"Stadt",results_found:"Ergebnisse gefunden",no_results:"Keine Ergebnisse gefunden",error_loading:"Fehler beim Laden der Ergebnisse",loading:"Laden...",stop_scraping:"Scraping Stoppen",progress:"Fortschritt",name:"Name",rating:"Bewertung",rating_count:"Bewertungen",phone:"Telefon",address:"Adresse",website:"Website",price_range:"Preisbereich",category:"Kategorie",monday_hours:"Montag",tuesday_hours:"Dienstag",wednesday_hours:"Mittwoch",thursday_hours:"Donnerstag",friday_hours:"Freitag",saturday_hours:"Samstag",sunday_hours:"Sonntag",view_details:"Details Anzeigen",completion_time:"Abschlusszeit",results_statistics:"Ergebnisstatistiken",success_rate:"Erfolgsrate",processing_errors:"Verarbeitungsfehler",data_quality:"Datenqualit\xe4t",performance_metrics:"Leistungsmetriken",completion_details:"Abschlussdetails",successful_results:"Erfolgreich",failed_results:"Fehlgeschlagen",google_errors:"Google-Fehler",network_errors:"Netzwerkfehler",parsing_errors:"Parsing-Fehler",timeout_errors:"Timeout-Fehler",avg_processing_time:"Durchschnittliche Verarbeitungszeit",total_processing_time:"Gesamte Verarbeitungszeit",complete_profiles:"Vollst\xe4ndige Profile",partial_profiles:"Teilweise Profile",missing_data:"Fehlende Daten",invalid_format:"Ung\xfcltiges Format",results_breakdown:"Ergebnisaufschl\xfcsselung",error_breakdown:"Fehleraufschl\xfcsselung",language_selector:"Sprache",backend_services_status:"Backend-Dienste Status",up:"Aktiv",down:"Inaktiv",start_backend:"Backend starten",api_running_redis_worker_unknown:"API l\xe4uft, aber Redis/Worker-Status unbekannt.",check_docker_compose:"\xdcberpr\xfcfen",processing_complete:"Verarbeitung Abgeschlossen!",successfully_processed:"Erfolgreich verarbeitet",businesses_with:"Unternehmen mit",success_rate_with_details:"Erfolgsrate",successful:"erfolgreich",failed:"fehlgeschlagen",view_detailed_results:"Detaillierte Ergebnisse Anzeigen","upload.title":"CSV-Datei Hochladen","upload.description":"W\xe4hlen Sie eine CSV-Datei mit Unternehmensinformationen zum Verarbeiten und Verbessern aus.","upload.selectFile":"CSV-Datei Ausw\xe4hlen","upload.button":"Datei Verarbeiten","upload.uploading":"Datei wird hochgeladen...",download_csv:"CSV Herunterladen",upload_another_csv:"Weitere CSV Hochladen",export_results:"Ergebnisse Exportieren","results.title":"Ergebnisse","table.entries":"Eintr\xe4ge","table.search":"Suchen...","table.noResults":"Keine Ergebnisse gefunden.","table.rowsPerPage":"Zeilen pro Seite","table.page":"Seite","table.of":"von","table.showing":"Anzeigen","processing.status":"Verarbeitungsstatus","processing.progress":"Verarbeitung von {completed} von {total}...","processing.button":"Verarbeitung...","error.title":"Fehler","error.retry":"Wiederholen","table.input_name":"Eingabename","table.found_name":"Gefundener Name","table.input_address":"Eingabeadresse","table.found_phone":"Gefundenes Telefon","table.found_website":"Gefundene Website","table.found_on_maps":"Auf Google Maps gefunden","table.input_data":"Eingabe","table.normalized":"Normalisiert","csv.file_empty":"Datei ist leer","csv.minimum_rows_required":"CSV muss mindestens eine Datenzeile neben der Kopfzeile haben","csv.maximum_rows_warning":"Datei hat {count} Zeilen. Maximum 1000 f\xfcr bessere Leistung empfohlen","csv.column_mismatch":"Zeile {row}: Anzahl der Spalten stimmt nicht mit der Kopfzeile \xfcberein ({actual} vs {expected})","csv.required_columns_missing":"Fehlende erforderliche Spalten: {columns}","csv.empty_business_name":"Zeile {row}: Firmenname darf nicht leer sein","csv.file_read_error":"Fehler beim Lesen der Datei","csv.download_template":"CSV-Vorlage herunterladen","csv.validating":"Validierung...","csv.valid":"G\xfcltig","csv.invalid":"Ung\xfcltig","csv.rows_data":"Datenzeilen","csv.errors":"Fehler:","csv.warnings":"Warnungen:","csv.columns_detected":"Erkannte Spalten:","csv.invalid_file":"Ung\xfcltige Datei","csv.validation_error":"Fehler bei der Dateivalididierung","csv.required_columns_info":"Erforderliche Spalten: {columns}. Optional: {optional}","csv.required_columns":"Erforderliche Spalten","csv.optional":"Optional","csv.utf8_support":"✓ UTF-8-Unterst\xfctzung f\xfcr Sonderzeichen (\xe4, \xf6, \xfc, \xe9, \xe0, \xf1, usw.)","gps.latitude":"Breitengrad","gps.longitude":"L\xe4ngengrad","gps.coordinates":"GPS-Koordinaten","gps.view_on_maps":"Auf Google Maps ansehen","processing.records_processed":"{completed} von {total} Datens\xe4tzen verarbeitet","time.seconds_ago":"vor {seconds} Sekunden","time.minutes_ago":"vor {minutes} Minuten","time.never":"Niemals","status.connected":"Verbunden","status.disconnected":"Getrennt","status.last_check":"Letzte \xdcberpr\xfcfung:","status.error_connecting":"Fehler beim Verbinden mit dem Backend","status.start_backend_instruction":"Backend starten:","status.partial_services":"API l\xe4uft, aber abh\xe4ngige Dienste k\xf6nnten getrennt sein","status.all_services_ok":"Alle Dienste laufen korrekt","status.degraded":"Beeintr\xe4chtigt","status.response_time":"Antwortzeit","status.queue_stats":"Warteschlangen-Stats","status.recent_activity":"Letzte Aktivit\xe4t","status.connection":"Verbindung","status.queue_access":"Warteschlangen-Zugriff","status.active_jobs":"Aktive Jobs","status.completed_jobs":"Abgeschlossen","status.waiting_jobs":"Wartend","status.failed_jobs":"Fehlgeschlagen","status.last_job_time":"Letzte Job-Zeit","status.accessible":"Zug\xe4nglich","status.blocked":"Blockiert","results.success_rate_good":"Gut","results.success_rate_fair":"Ordentlich","results.success_rate_low":"Niedrig","results.industry_average":"Branchendurchschnitt: ~50%","results.complete_data_extracted":"Vollst\xe4ndige Daten extrahiert","results.no_data_found":"Keine Daten gefunden","results.businesses_searched":"Unternehmen durchsucht","results.google_maps_queries":"Google Maps Abfragen","results.error_analysis":"Fehleranalyse","results.not_found_on_maps":"Nicht auf Google Maps gefunden","results.all_strategies_failed":"Alle Suchstrategien fehlgeschlagen","results.other_errors":"Andere Fehler","results.success_tip":"Erfolgsraten variieren je nach Unternehmenstyp und Standortgenauigkeit. Spezifischere Adressen f\xfchren typischerweise zu besseren Ergebnissen.","results.download_clean_csv":"Bereinigte CSV Herunterladen"},it:{title:"Strumento di Web Scraping",subtitle:"Carica il tuo file CSV e ottieni dati aziendali migliorati","error.upload":"Caricamento del file non riuscito. Controlla il file e riprova.","error.processing":"Si \xe8 verificato un errore durante l'elaborazione del file.",start_scraping:"Inizia Scraping",search_placeholder:"Cerca aziende...",location_placeholder:"Inserisci posizione",city_label:"Citt\xe0",results_found:"risultati trovati",no_results:"Nessun risultato trovato",error_loading:"Errore nel caricamento dei risultati",loading:"Caricamento...",stop_scraping:"Ferma Scraping",progress:"Progresso",name:"Nome",rating:"Valutazione",rating_count:"Recensioni",phone:"Telefono",address:"Indirizzo",website:"Sito Web",price_range:"Fascia di Prezzo",category:"Categoria",monday_hours:"Luned\xec",tuesday_hours:"Marted\xec",wednesday_hours:"Mercoled\xec",thursday_hours:"Gioved\xec",friday_hours:"Venerd\xec",saturday_hours:"Sabato",sunday_hours:"Domenica",view_details:"Visualizza Dettagli",completion_time:"Tempo di Completamento",results_statistics:"Statistiche Risultati",success_rate:"Tasso di Successo",processing_errors:"Errori di Elaborazione",data_quality:"Qualit\xe0 dei Dati",performance_metrics:"Metriche di Performance",completion_details:"Dettagli di Completamento",successful_results:"Riusciti",failed_results:"Falliti",google_errors:"Errori Google",network_errors:"Errori di Rete",parsing_errors:"Errori di Parsing",timeout_errors:"Errori di Timeout",avg_processing_time:"Tempo di Elaborazione Medio",total_processing_time:"Tempo di Elaborazione Totale",complete_profiles:"Profili Completi",partial_profiles:"Profili Parziali",missing_data:"Dati Mancanti",invalid_format:"Formato Non Valido",results_breakdown:"Suddivisione Risultati",error_breakdown:"Suddivisione Errori",language_selector:"Lingua",backend_services_status:"Stato Servizi Backend",up:"Attivo",down:"Inattivo",start_backend:"Avvia backend",api_running_redis_worker_unknown:"API \xe8 in esecuzione ma stato Redis/Worker sconosciuto.",check_docker_compose:"Controlla",processing_complete:"Elaborazione Completata!",successfully_processed:"Elaborato con successo",businesses_with:"aziende con",success_rate_with_details:"tasso di successo",successful:"riuscito",failed:"fallito",view_detailed_results:"Visualizza Risultati Dettagliati","upload.title":"Carica File CSV","upload.description":"Seleziona un file CSV contenente informazioni aziendali da elaborare e migliorare.","upload.selectFile":"Seleziona File CSV","upload.button":"Elabora File","upload.uploading":"Caricamento file...",download_csv:"Scarica CSV",upload_another_csv:"Carica un Altro CSV",export_results:"Esporta Risultati","results.title":"Risultati","table.entries":"voci","table.search":"Cerca...","table.noResults":"Nessun risultato trovato.","table.rowsPerPage":"Righe per pagina","table.page":"Pagina","table.of":"di","table.showing":"Mostrando","processing.status":"Stato del processo","processing.progress":"Elaborazione di {completed} su {total}...","processing.button":"Elaborazione...","error.title":"Errore","error.retry":"Riprova","table.input_name":"Nome di input","table.found_name":"Nome trovato","table.input_address":"Indirizzo di input","table.found_phone":"Telefono trovato","table.found_website":"Sito Web trovato","table.found_on_maps":"Trovato su Google Maps","table.input_data":"Input","table.normalized":"Normalizzato","csv.file_empty":"Il file \xe8 vuoto","csv.minimum_rows_required":"Il CSV deve avere almeno una riga di dati oltre all'intestazione","csv.maximum_rows_warning":"Il file ha {count} righe. Massimo 1000 raccomandato per prestazioni migliori","csv.column_mismatch":"Riga {row}: Il numero di colonne non corrisponde all'intestazione ({actual} vs {expected})","csv.required_columns_missing":"Colonne richieste mancanti: {columns}","csv.empty_business_name":"Riga {row}: Il nome dell'azienda non pu\xf2 essere vuoto","csv.file_read_error":"Errore nella lettura del file","csv.download_template":"Scarica Modello CSV","csv.validating":"Validazione...","csv.valid":"Valido","csv.invalid":"Non Valido","csv.rows_data":"righe di dati","csv.errors":"Errori:","csv.warnings":"Avvisi:","csv.columns_detected":"Colonne rilevate:","csv.invalid_file":"File Non Valido","csv.validation_error":"Errore nella validazione del file","csv.required_columns_info":"Colonne richieste: {columns}. Opzionale: {optional}","csv.required_columns":"Colonne richieste","csv.optional":"Opzionale","csv.utf8_support":"✓ Supporto UTF-8 per caratteri speciali (\xe4, \xf6, \xfc, \xe9, \xe0, \xf1, ecc.)","gps.latitude":"Latitudine","gps.longitude":"Longitudine","gps.coordinates":"Coordinate GPS","gps.view_on_maps":"Visualizza su Google Maps","processing.records_processed":"{completed} di {total} record elaborati","time.seconds_ago":"{seconds} secondi fa","time.minutes_ago":"{minutes} minuti fa","time.never":"Mai","status.connected":"Connesso","status.disconnected":"Disconnesso","status.last_check":"Ultima verifica:","status.error_connecting":"Errore di connessione al backend","status.start_backend_instruction":"Avvia backend:","status.partial_services":"API in esecuzione ma i servizi dipendenti potrebbero essere disconnessi","status.all_services_ok":"Tutti i servizi funzionano correttamente","status.degraded":"Degradato","status.response_time":"Tempo di risposta","status.queue_stats":"Statistiche coda","status.recent_activity":"Attivit\xe0 recente","status.connection":"Connessione","status.queue_access":"Accesso Coda","status.active_jobs":"Job Attivi","status.completed_jobs":"Completati","status.waiting_jobs":"In Attesa","status.failed_jobs":"Falliti","status.last_job_time":"Tempo Ultimo Job","status.accessible":"Accessibile","status.blocked":"Bloccato","results.success_rate_good":"Buono","results.success_rate_fair":"Discreto","results.success_rate_low":"Basso","results.industry_average":"Media del settore: ~50%","results.complete_data_extracted":"Dati completi estratti","results.no_data_found":"Nessun dato trovato","results.businesses_searched":"Aziende cercate","results.google_maps_queries":"Query Google Maps","results.error_analysis":"Analisi degli Errori","results.not_found_on_maps":"Non trovato su Google Maps","results.all_strategies_failed":"Tutte le strategie di ricerca fallite","results.other_errors":"Altri errori","results.success_tip":"I tassi di successo variano in base al tipo di attivit\xe0 e alla precisione della posizione. Indirizzi pi\xf9 specifici producono tipicamente risultati migliori.","results.download_clean_csv":"Scarica CSV Pulito"}};function I(){let{language:e}=(0,P.o)();return(0,r.useMemo)(()=>({t:(s,t)=>{let a=z[e][s]||z.en[s];return t&&Object.entries(t).forEach(e=>{let[s,t]=e;a=a.replace("{".concat(s,"}"),String(t))}),a}}),[e])}function V(e){let{file:s,onFileChange:t,onProcessFile:n,isDisabled:o}=e,{t:l}=I(),[i,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{s?(m(!0),c.validateCSV(s,l).then(d).catch(e=>{console.error("Error validating CSV:",e),d({isValid:!1,errors:[l("csv.validation_error")],warnings:[],rowCount:0,columns:[],requiredColumns:["name","address","city"],missingColumns:["name","address","city"]})}).finally(()=>m(!1))):d(null)},[s,l]),(0,a.jsxs)(x,{className:"mb-8",children:[(0,a.jsxs)(v,{children:[(0,a.jsxs)(b,{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-5 w-5"}),l("upload.title")]}),(0,a.jsxs)(_,{children:[l("upload.description"),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[l("csv.required_columns"),": ",(0,a.jsx)("code",{children:"name"}),", ",(0,a.jsx)("code",{children:"address"}),", ",(0,a.jsx)("code",{children:"city"}),". ",l("csv.optional"),": ",(0,a.jsx)("code",{children:"postal_code"})]}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-xs text-green-600 flex items-center gap-1 mt-1",children:[(0,a.jsx)(A.A,{className:"h-3 w-3"}),l("csv.utf8_support")]})]})]}),(0,a.jsxs)(w,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(f,{variant:"outline",size:"sm",onClick:()=>{c.downloadCSVTemplate()},className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-4 w-4"}),l("csv.download_template")]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(S,{htmlFor:"csv-file",children:l("upload.selectFile")}),(0,a.jsx)(y,{id:"csv-file",type:"file",accept:".csv",onChange:t,disabled:o})]}),s&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-lg",children:[(0,a.jsx)(R.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:s.name}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",(s.size/1024).toFixed(1)," KB)"]}),u&&(0,a.jsx)("span",{className:"text-xs text-blue-600",children:l("csv.validating")})]}),i&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[i.isValid?(0,a.jsxs)(k,{className:"bg-green-100 text-green-800 border-green-200",children:[(0,a.jsx)(A.A,{className:"h-3 w-3 mr-1"}),"✅ ",l("csv.valid")]}):(0,a.jsxs)(k,{variant:"destructive",children:[(0,a.jsx)(F.A,{className:"h-3 w-3 mr-1"}),"❌ ",l("csv.invalid")]}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[i.rowCount," ",l("csv.rows_data")]})]}),i.errors.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-800 mb-2",children:l("csv.errors")}),(0,a.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:i.errors.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]}),i.warnings.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-800 mb-2",children:l("csv.warnings")}),(0,a.jsx)("ul",{className:"text-sm text-yellow-700 space-y-1",children:i.warnings.map((e,s)=>(0,a.jsxs)("li",{children:["• ",e]},s))})]}),i.columns.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-blue-800 mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 inline mr-1"}),l("csv.columns_detected")]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:i.columns.map((e,s)=>(0,a.jsx)(k,{variant:"outline",className:"text-xs",children:e},s))})]})]})]}),(0,a.jsx)(f,{onClick:n,disabled:!s||o||i&&!i.isValid||!1,className:"w-full",size:"lg",children:o?l("upload.uploading"):s&&i&&!i.isValid?"❌ ".concat(l("csv.invalid_file")):l("upload.button")})]})]})}var L=t(6838);let M=r.forwardRef((e,s)=>{let{className:t,value:r,...n}=e;return(0,a.jsx)(L.bL,{ref:s,className:g("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...n,children:(0,a.jsx)(L.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});M.displayName=L.bL.displayName;var U=t(4505),B=t(314),q=t(4504),O=t(1594),G=t(9789),W=t(9083);let H=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:g("w-full caption-bottom text-sm",t),...r})})});H.displayName="Table";let J=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:g("[&_tr]:border-b",t),...r})});J.displayName="TableHeader";let Z=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:g("[&_tr:last-child]:border-0",t),...r})});Z.displayName="TableBody",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:g("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let K=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:g("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});K.displayName="TableRow";let $=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:g("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});$.displayName="TableHead";let Q=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:g("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});Q.displayName="TableCell",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:g("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption";var X=t(520),Y=t(1719),ee=t(1902),es=t(8867);let et=X.bL;X.YJ;let ea=X.WT,er=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(X.l9,{ref:s,className:g("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,(0,a.jsx)(X.In,{asChild:!0,children:(0,a.jsx)(Y.A,{className:"h-4 w-4 opacity-50"})})]})});er.displayName=X.l9.displayName;let en=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(X.PP,{ref:s,className:g("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(ee.A,{className:"h-4 w-4"})})});en.displayName=X.PP.displayName;let eo=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(X.wn,{ref:s,className:g("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(Y.A,{className:"h-4 w-4"})})});eo.displayName=X.wn.displayName;let el=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...o}=e;return(0,a.jsx)(X.ZL,{children:(0,a.jsxs)(X.UC,{ref:s,className:g("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...o,children:[(0,a.jsx)(en,{}),(0,a.jsx)(X.LM,{className:g("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(eo,{})]})})});el.displayName=X.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(X.JU,{ref:s,className:g("px-2 py-1.5 text-sm font-semibold",t),...r})}).displayName=X.JU.displayName;let ei=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(X.q7,{ref:s,className:g("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(X.VF,{children:(0,a.jsx)(es.A,{className:"h-4 w-4"})})}),(0,a.jsx)(X.p4,{children:r})]})});ei.displayName=X.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(X.wv,{ref:s,className:g("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=X.wv.displayName;var ec=t(1864),ed=t(6261),eu=t(8435),em=t(853),ep=t(7661),eg=t(3518),eh=t(6967),ef=t(7054);function ex(e,s){if(!e||"object"!=typeof e)return null;for(let t of({Monday:["Monday","monday","Mon","mon"],Tuesday:["Tuesday","tuesday","Tue","tue"],Wednesday:["Wednesday","wednesday","Wed","wed"],Thursday:["Thursday","thursday","Thu","thu"],Friday:["Friday","friday","Fri","fri"],Saturday:["Saturday","saturday","Sat","sat"],Sunday:["Sunday","sunday","Sun","sun"]})[s]||[s])if(e[t])return e[t];return null}function ev(e){var s;let{data:t}=e,[n,o]=(0,r.useState)([]),[l,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),{t:u}=I(),m=(0,r.useMemo)(()=>[{accessorKey:"originalData.name",header:e=>{let{column:s}=e;return(0,a.jsxs)(f,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),className:"h-auto p-0 font-semibold",children:["Input Name","asc"===s.getIsSorted()?(0,a.jsx)(ec.A,{className:"ml-2 h-4 w-4"}):"desc"===s.getIsSorted()?(0,a.jsx)(ed.A,{className:"ml-2 h-4 w-4"}):(0,a.jsx)(eu.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{var s;let{row:t}=e,r=t.original.originalData.name,n=null===(s=t.original.scrapedData)||void 0===s?void 0:s.status;return(0,a.jsxs)("div",{className:"font-medium max-w-xs",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-1",children:"Input:"}),(0,a.jsx)("div",{className:"truncate font-semibold",title:r,children:r}),(0,a.jsxs)("div",{className:"mt-1",children:["success"===n&&(0,a.jsx)(k,{className:"bg-green-100 text-green-800 border-green-200 text-xs",children:"✅ Success"}),"partial"===n&&(0,a.jsx)(k,{className:"bg-yellow-100 text-yellow-800 border-yellow-200 text-xs",children:"⚠️ Partial"}),"failed"===n&&(0,a.jsx)(k,{className:"bg-red-100 text-red-800 border-red-200 text-xs",children:"❌ Failed"}),!n&&(0,a.jsx)(k,{className:"bg-gray-100 text-gray-800 border-gray-200 text-xs",children:"⏳ Processing"})]})]})}},{accessorFn:e=>{var s;return null===(s=e.scrapedData)||void 0===s?void 0:s.fullName},id:"scraped_name",header:e=>{let{column:s}=e;return(0,a.jsxs)(f,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),className:"h-auto p-0 font-semibold",children:["Found Name","asc"===s.getIsSorted()?(0,a.jsx)(ec.A,{className:"ml-2 h-4 w-4"}):"desc"===s.getIsSorted()?(0,a.jsx)(ed.A,{className:"ml-2 h-4 w-4"}):(0,a.jsx)(eu.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:s}=e,t=s.original.scrapedData;return t&&"success"===t.status?(0,a.jsxs)("div",{className:"font-medium max-w-xs",children:[(0,a.jsx)("div",{className:"text-xs text-green-600 mb-1",children:"Found on Google Maps:"}),(0,a.jsx)("div",{className:"truncate font-semibold",title:t.fullName,children:t.fullName})]}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"Not found"})}},{accessorFn:e=>{var s;return null===(s=e.scrapedData)||void 0===s?void 0:s.fullAddress},id:"scraped_address",header:e=>{let{column:s}=e;return(0,a.jsxs)(f,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),className:"h-auto p-0 font-semibold",children:["\uD83D\uDCCD Address","asc"===s.getIsSorted()?(0,a.jsx)(ec.A,{className:"ml-2 h-4 w-4"}):"desc"===s.getIsSorted()?(0,a.jsx)(ed.A,{className:"ml-2 h-4 w-4"}):(0,a.jsx)(eu.A,{className:"ml-2 h-4 w-4"})]})},cell:e=>{var s,t;let{row:r}=e,n=null===(s=r.original.scrapedData)||void 0===s?void 0:s.fullAddress;return"success"===(null===(t=r.original.scrapedData)||void 0===t?void 0:t.status)&&n?(0,a.jsxs)("div",{className:"max-w-xs",children:[(0,a.jsx)("div",{className:"text-xs text-green-600 mb-1",children:"\uD83D\uDCCD Address:"}),(0,a.jsx)("div",{className:"truncate text-sm",title:n,children:n})]}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"N/A"})}},{accessorFn:e=>{var s;return null===(s=e.scrapedData)||void 0===s?void 0:s.phone},id:"phone",header:()=>"\uD83D\uDCDE Phone",cell:e=>{var s,t;let{row:r}=e,n=null===(s=r.original.scrapedData)||void 0===s?void 0:s.phone;return"success"===(null===(t=r.original.scrapedData)||void 0===t?void 0:t.status)&&n?(0,a.jsxs)("a",{href:"tel:".concat(n),className:"text-blue-600 hover:underline text-sm",children:["\uD83D\uDCDE ",n]}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"N/A"})}},{accessorFn:e=>{var s;return null===(s=e.scrapedData)||void 0===s?void 0:s.website},id:"website",header:()=>"\uD83C\uDF10 Website",cell:e=>{var s,t;let{row:r}=e,n=null===(s=r.original.scrapedData)||void 0===s?void 0:s.website;return"success"===(null===(t=r.original.scrapedData)||void 0===t?void 0:t.status)&&n?(0,a.jsxs)("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm max-w-xs truncate inline-block",title:n,children:["\uD83C\uDF10 ",n.replace(/^https?:\/\//,"").split("/")[0]]}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"N/A"})}},{accessorFn:e=>{var s;return null===(s=e.scrapedData)||void 0===s?void 0:s.category},id:"category",header:()=>"\uD83C\uDFF7️ Category",cell:e=>{var s,t;let{row:r}=e,n=null===(s=r.original.scrapedData)||void 0===s?void 0:s.category;return"success"===(null===(t=r.original.scrapedData)||void 0===t?void 0:t.status)&&n?(0,a.jsxs)(k,{variant:"outline",className:"text-xs max-w-xs truncate",title:n,children:["\uD83C\uDFF7️ ",n]}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"N/A"})}},{accessorFn:e=>{var s;return null===(s=e.scrapedData)||void 0===s?void 0:s.latitude},id:"latitude",header:()=>"\uD83D\uDDFA️ Latitude",cell:e=>{var s,t,r;let{row:n}=e,o=null===(s=n.original.scrapedData)||void 0===s?void 0:s.latitude,l=null===(t=n.original.scrapedData)||void 0===t?void 0:t.longitude;if("success"!==(null===(r=n.original.scrapedData)||void 0===r?void 0:r.status)||!o)return(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"N/A"});if(o&&l){let e="https://www.google.com/maps?q=".concat(o,",").concat(l);return(0,a.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-xs font-mono",title:"View on Google Maps: ".concat(o,", ").concat(l),children:["\uD83D\uDDFA️ ",parseFloat(o).toFixed(6)]})}return(0,a.jsxs)("span",{className:"text-xs font-mono",children:["\uD83D\uDDFA️ ",parseFloat(o).toFixed(6)]})}},{accessorFn:e=>{var s;return null===(s=e.scrapedData)||void 0===s?void 0:s.longitude},id:"longitude",header:()=>"\uD83D\uDCCD Longitude",cell:e=>{var s,t;let{row:r}=e,n=null===(s=r.original.scrapedData)||void 0===s?void 0:s.longitude;return"success"===(null===(t=r.original.scrapedData)||void 0===t?void 0:t.status)&&n?(0,a.jsxs)("span",{className:"text-xs font-mono",children:["\uD83D\uDCCD ",parseFloat(n).toFixed(6)]}):(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:"N/A"})}},{accessorFn:e=>{var s;return ex(null===(s=e.scrapedData)||void 0===s?void 0:s.openingHours,"Monday")},id:"monday_hours",header:"\uD83D\uDDD3️ Mon",size:120,cell:e=>{let{getValue:s}=e;return p(s())}},{accessorFn:e=>{var s;return ex(null===(s=e.scrapedData)||void 0===s?void 0:s.openingHours,"Tuesday")},id:"tuesday_hours",header:"\uD83D\uDDD3️ Tue",size:120,cell:e=>{let{getValue:s}=e;return p(s())}},{accessorFn:e=>{var s;return ex(null===(s=e.scrapedData)||void 0===s?void 0:s.openingHours,"Wednesday")},id:"wednesday_hours",header:"\uD83D\uDDD3️ Wed",size:120,cell:e=>{let{getValue:s}=e;return p(s())}},{accessorFn:e=>{var s;return ex(null===(s=e.scrapedData)||void 0===s?void 0:s.openingHours,"Thursday")},id:"thursday_hours",header:"\uD83D\uDDD3️ Thu",size:120,cell:e=>{let{getValue:s}=e;return p(s())}},{accessorFn:e=>{var s;return ex(null===(s=e.scrapedData)||void 0===s?void 0:s.openingHours,"Friday")},id:"friday_hours",header:"\uD83D\uDDD3️ Fri",size:120,cell:e=>{let{getValue:s}=e;return p(s())}},{accessorFn:e=>{var s;return ex(null===(s=e.scrapedData)||void 0===s?void 0:s.openingHours,"Saturday")},id:"saturday_hours",header:"\uD83D\uDDD3️ Sat",size:120,cell:e=>{let{getValue:s}=e;return p(s())}},{accessorFn:e=>{var s;return ex(null===(s=e.scrapedData)||void 0===s?void 0:s.openingHours,"Sunday")},id:"sunday_hours",header:"\uD83D\uDDD3️ Sun",size:120,cell:e=>{let{getValue:s}=e;return p(s())}}],[u]),p=e=>{if(!e)return(0,a.jsx)("span",{className:"text-muted-foreground text-xs",children:"N/A"});let s=g(e);if("Closed"===s)return(0,a.jsx)("span",{className:"text-red-500 text-xs font-medium",children:"\uD83D\uDD34 Closed"});if("00:00 - 23:59"===s)return(0,a.jsx)("span",{className:"text-green-500 text-xs font-medium",children:"\uD83D\uDFE2 24h"});let t=s.includes(" & ");return/\d{2}:\d{2}/.test(s)?(0,a.jsx)("div",{className:"text-xs font-mono whitespace-nowrap ".concat(t?"text-blue-700":"text-blue-600"),title:"Original: ".concat(e),children:s}):(0,a.jsx)("div",{className:"text-muted-foreground text-xs",title:"Original: ".concat(e),children:s})},g=e=>{if(!e)return"N/A";try{let s=e.trim(),t=s.toLowerCase();if(t.includes("cerrado")||t.includes("closed"))return"Closed";if(t.includes("24")||t.includes("siempre")||t.includes("always"))return"00:00 - 23:59";if(((s=(s=(s=s.replace(/12:(\d{2})\s*AM/gi,"00:$1").replace(/(\d{1,2}):(\d{2})\s*AM/gi,(e,s,t)=>{let a=parseInt(s);return"".concat(a.toString().padStart(2,"0"),":").concat(t)}).replace(/12:(\d{2})\s*PM/gi,"12:$1").replace(/(\d{1,2}):(\d{2})\s*PM/gi,(e,s,t)=>{let a=parseInt(s)+12;return"".concat(a.toString().padStart(2,"0"),":").concat(t)}).replace(/(\d{1,2})\s*AM/gi,(e,s)=>{let t=parseInt(s);return 12===t?"00:00":"".concat(t.toString().padStart(2,"0"),":00")}).replace(/(\d{1,2})\s*PM/gi,(e,s)=>{let t=parseInt(s);return 12===t?"12:00":"".concat((t+12).toString().padStart(2,"0"),":00")})).replace(/\s*[–—−~]\s*/g," - ").replace(/\s*to\s*/gi," - ").replace(/\s*hasta\s*/gi," - ").replace(/\s*a\s*/gi," - ").replace(/\s+/g," ").trim()).replace(/\b(\d):(\d{2})/g,"0$1:$2")).includes(",")||s.includes("&")||s.includes(" y "))&&(s=s.replace(/[,&]/g," & ").replace(/\s+y\s+/gi," & ").replace(/\s+&\s+/g," & ")),s=s.replace(/\s+/g," ").trim(),!/\d{2}:\d{2}/.test(s))return e;return s}catch(s){return console.warn("Error formatting hours:",e,s),e}},h=(0,G.N4)({data:t,columns:m,onSortingChange:o,onColumnFiltersChange:i,onGlobalFilterChange:d,getCoreRowModel:(0,W.HT)(),getPaginationRowModel:(0,W.kW)(),getSortedRowModel:(0,W.h5)(),getFilteredRowModel:(0,W.hM)(),state:{sorting:n,columnFilters:l,globalFilter:c},initialState:{pagination:{pageSize:10}}});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("div",{className:"relative flex-1 max-w-sm",children:[(0,a.jsx)(em.A,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(y,{placeholder:u("table.search"),value:null!=c?c:"",onChange:e=>d(String(e.target.value)),className:"pl-8"})]})}),(0,a.jsx)("div",{className:"rounded-md border overflow-auto max-h-[60vh]",children:(0,a.jsxs)(H,{children:[(0,a.jsx)(J,{className:"sticky top-0 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:h.getHeaderGroups().map(e=>(0,a.jsx)(K,{children:e.headers.map(e=>(0,a.jsx)($,{children:e.isPlaceholder?null:(0,G.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(Z,{children:(null===(s=h.getRowModel().rows)||void 0===s?void 0:s.length)?h.getRowModel().rows.map(e=>(0,a.jsx)(K,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(Q,{children:(0,G.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(K,{children:(0,a.jsx)(Q,{colSpan:m.length,className:"h-24 text-center",children:u("table.noResults")})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between space-x-2 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:u("table.rowsPerPage")}),(0,a.jsxs)(et,{value:"".concat(h.getState().pagination.pageSize),onValueChange:e=>{h.setPageSize(Number(e))},children:[(0,a.jsx)(er,{className:"h-8 w-[70px]",children:(0,a.jsx)(ea,{placeholder:h.getState().pagination.pageSize})}),(0,a.jsx)(el,{side:"top",children:[10,20,30,40,50].map(e=>(0,a.jsx)(ei,{value:"".concat(e),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[(0,a.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:[u("table.page")," ",h.getState().pagination.pageIndex+1," ",u("table.of")," ",h.getPageCount()]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(f,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex bg-transparent",onClick:()=>h.setPageIndex(0),disabled:!h.getCanPreviousPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,a.jsx)(ep.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(f,{variant:"outline",className:"h-8 w-8 p-0 bg-transparent",onClick:()=>h.previousPage(),disabled:!h.getCanPreviousPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,a.jsx)(eg.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(f,{variant:"outline",className:"h-8 w-8 p-0 bg-transparent",onClick:()=>h.nextPage(),disabled:!h.getCanNextPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,a.jsx)(eh.A,{className:"h-4 w-4"})]}),(0,a.jsxs)(f,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex bg-transparent",onClick:()=>h.setPageIndex(h.getPageCount()-1),disabled:!h.getCanNextPage(),children:[(0,a.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,a.jsx)(ef.A,{className:"h-4 w-4"})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[u("table.showing")," ",h.getState().pagination.pageIndex*h.getState().pagination.pageSize+1," ",u("table.of")," ",Math.min((h.getState().pagination.pageIndex+1)*h.getState().pagination.pageSize,h.getFilteredRowModel().rows.length)," ",u("table.of")," ",h.getFilteredRowModel().rows.length," ",u("table.entries")]})})]})]})}function eb(e){let{batchId:s,progress:t,onProgressUpdate:n,onComplete:o,onNewSearch:l}=e,{t:i}=I(),[c,d]=(0,r.useState)(t),[u,m]=(0,r.useState)([]),[p,g]=(0,r.useState)(!1),[h,y]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),E=(0,r.useRef)(new Set),R=(0,r.useRef)(null);(0,r.useEffect)(()=>{s!==R.current&&(console.log("\uD83D\uDD04 Batch ID changed, resetting processed results"),R.current=s,E.current.clear(),m([]),d(t),y(!1),N(!1),C(!1))},[s,t]),(0,r.useEffect)(()=>{if(!h&&s){let e=setTimeout(()=>{h||(console.log("⚠️ No data received after 5 seconds, showing warning"),N(!0))},5e3);return()=>clearTimeout(e)}},[h,s]);let{isConnected:F,error:T}=function(e){let{batchId:s,onProgress:t,onResult:a,onComplete:n,onError:o,backendUrl:l="http://localhost:3000/api/v1"}=e,[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),m=(0,r.useRef)(null),p=(0,r.useRef)(null),g=(0,r.useRef)(!1),h=(0,r.useRef)(!1),f=(0,r.useRef)(t),x=(0,r.useRef)(a),v=(0,r.useRef)(n),b=(0,r.useRef)(o);(0,r.useEffect)(()=>{f.current=t,x.current=a,v.current=n,b.current=o},[t,a,n,o]);let _=(0,r.useCallback)(()=>{p.current||g.current||(console.log("\uD83D\uDD04 Starting polling fallback (every 2 seconds)"),c(!0),p.current=setInterval(async()=>{if(!s||g.current){w();return}try{var e,t,a;let r=await fetch("/api/v1/scraping-batch/".concat(s)),n=await r.json();console.log("\uD83D\uDCCA Polling update - Status:",n.status,"Results:",(null===(e=n.results)||void 0===e?void 0:e.length)||0),f.current&&n.progress&&f.current({batchId:n.batchId,completed:n.progress.completed,total:n.progress.total,percentage:n.progress.percentage,timestamp:new Date().toISOString()}),x.current&&n.results&&Array.isArray(n.results)&&n.results.forEach(e=>{x.current&&x.current({...e,timestamp:new Date().toISOString()})}),"completed"===n.status&&(console.log("✅ Batch completed (detected via polling)"),g.current=!0,v.current&&v.current({batchId:n.batchId,completed:(null===(t=n.progress)||void 0===t?void 0:t.completed)||0,total:(null===(a=n.progress)||void 0===a?void 0:a.total)||0,message:"Batch processing completed",timestamp:new Date().toISOString()}),w())}catch(e){console.error("❌ Polling error:",e)}},2e3))},[s]),w=(0,r.useCallback)(()=>{p.current&&(console.log("⏹️ Stopping polling"),clearInterval(p.current),p.current=null)},[]),y=(0,r.useCallback)(()=>{if(!s||h.current||g.current){console.log("⚠️ Skipping connection - batchId:",s,"connecting:",h.current,"completed:",g.current);return}if(h.current=!0,console.log("\uD83D\uDD0C Connecting to SSE stream for batch:",s),console.log("\uD83D\uDCE1 Backend URL:",l),"localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname){console.log("\uD83C\uDF10 Detected proxy/CDN, using polling instead of SSE"),h.current=!1,_();return}fetch("/api/v1/scraping-batch/".concat(s)).then(e=>e.json()).then(e=>{var t;console.log("\uD83D\uDCCB Batch status:",e.status);let a="completed"===e.status,r=(null===(t=e.progress)||void 0===t?void 0:t.total)||e.totalJobs||0;a&&(console.log("✅ Batch already completed, connecting to SSE to fetch results. Total:",r),f.current&&r>0&&f.current({batchId:e.batchId,completed:0,total:r,percentage:0,timestamp:new Date().toISOString()}));try{let e="".concat(l,"/scraping-batch/").concat(s,"/stream");console.log("\uD83D\uDD17 SSE URL:",e);let t=new EventSource(e);m.current=t,t.addEventListener("connected",e=>{let s=JSON.parse(e.data);console.log("✅ SSE Connected:",s),c(!0),u(null),h.current=!1}),t.addEventListener("progress",e=>{let s=JSON.parse(e.data);console.log("\uD83D\uDCCA Progress data received:",s),f.current&&f.current(s)}),t.addEventListener("result",e=>{var s;let t=JSON.parse(e.data);console.log("\uD83D\uDCE6 Result received:",null===(s=t.originalData)||void 0===s?void 0:s.name),x.current&&x.current(t)}),t.addEventListener("complete",e=>{let s=JSON.parse(e.data);console.log("✅ SSE Complete:",s),g.current=!0,v.current&&v.current(s),j()}),t.addEventListener("error",e=>{if(e.data){let s=JSON.parse(e.data);console.error("❌ SSE Error event:",s),u(s.message),b.current&&b.current(s)}}),t.onerror=e=>{console.error("❌ SSE Connection error:",e),c(!1),u("Connection lost. Switching to polling..."),t.readyState===EventSource.CLOSED&&(console.log("\uD83D\uDD04 SSE closed, starting polling fallback"),j(),_())}}catch(e){console.error("❌ Failed to create SSE connection:",e),u("Failed to establish connection, using polling"),c(!1),h.current=!1,_()}}).catch(e=>{console.error("❌ Failed to check batch status:",e),u("Failed to check batch status"),h.current=!1,_()})},[s,l,_]),j=(0,r.useCallback)(()=>{m.current&&(console.log("\uD83D\uDD0C Disconnecting SSE stream"),m.current.close(),m.current=null,c(!1)),w(),h.current=!1,g.current=!1},[w]);return(0,r.useEffect)(()=>(s&&y(),()=>{m.current&&(console.log("\uD83D\uDD0C Cleanup: Disconnecting SSE stream"),m.current.close(),m.current=null),p.current&&(clearInterval(p.current),p.current=null)}),[s]),{isConnected:i,error:d,disconnect:j}}({batchId:s,onProgress:e=>{y(!0),e.total&&e.total>0&&(d(s=>({completed:E.current.size,total:e.total})),n&&n(E.current.size,e.total))},onResult:e=>{var s,t,a,r;let n=e.jobId||(null===(s=e.originalData)||void 0===s?void 0:s.name)||"".concat(null===(t=e.originalData)||void 0===t?void 0:t.address,"-").concat(null===(a=e.originalData)||void 0===a?void 0:a.city);if(E.current.has(n))return;console.log("✅ New result added:",(null===(r=e.originalData)||void 0===r?void 0:r.name)||n),E.current.add(n),m(s=>[e,...s]);let l=E.current.size;d(e=>{let s=e.total;return console.log("\uD83D\uDCCA Progress: ".concat(l,"/").concat(s)),l>=s&&s>0&&!S&&(console.log("✅ All results received, marking as complete"),C(!0),o&&setTimeout(()=>{o({completed:l,total:s})},500)),{completed:l,total:s}})},onComplete:e=>{console.log("✅ Processing complete:",e);let s=E.current.size,t=Math.max(e.total,s);d({completed:s,total:t}),y(!0),C(!0),o&&o({completed:s,total:t})},onError:e=>{console.error("❌ SSE Error:",e)}}),P=c.total>0?Math.round(c.completed/c.total*100):0;return(0,a.jsxs)(x,{className:"mb-8",children:[(0,a.jsxs)(v,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[S?(0,a.jsx)(A.A,{className:"h-5 w-5 text-green-600"}):(0,a.jsx)(U.A,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)(b,{children:S?"Processing Complete":"Real-Time Processing"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[F&&!S&&(0,a.jsxs)(k,{variant:"outline",className:"text-xs",children:[(0,a.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse mr-1"}),"Live"]}),S&&(0,a.jsxs)(k,{variant:"outline",className:"text-xs bg-green-50 text-green-700 border-green-200",children:[(0,a.jsx)(A.A,{className:"h-3 w-3 mr-1"}),"Done"]}),(0,a.jsx)(f,{variant:"ghost",size:"sm",onClick:()=>g(!p),children:p?(0,a.jsx)(B.A,{className:"h-4 w-4"}):(0,a.jsx)(q.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(_,{children:c.total>0?S?"Successfully processed ".concat(c.completed," of ").concat(c.total," businesses"):"Processing ".concat(c.completed," of ").concat(c.total," businesses"):"Starting scraping process..."})]}),(0,a.jsxs)(w,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsx)("span",{className:"font-semibold",children:h?"".concat(P,"%"):"Connecting..."})]}),(0,a.jsx)(M,{value:P,className:"w-full h-3"})]}),T&&(0,a.jsxs)("div",{className:"text-xs text-red-600 p-2 bg-red-50 rounded border border-red-200",children:["⚠️ ",T]}),j&&0===c.total&&!F&&!T&&s&&(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(O.A,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-yellow-800",children:"Processing Stuck or Already Completed"}),(0,a.jsx)("p",{className:"text-xs text-yellow-700 mt-1",children:"This batch might have been processed already. Click below to start a new search."})]})]}),l&&(0,a.jsxs)(f,{onClick:l,size:"sm",variant:"outline",className:"w-full bg-white hover:bg-yellow-50 border-yellow-300",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2"}),"Upload New CSV"]})]}),u.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold",children:[S?"Final Results":"Live Results"," (",u.length," / ",c.total,")"]}),!S&&(0,a.jsxs)(k,{variant:"outline",className:"text-xs",children:[(0,a.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse mr-1"}),"Processing"]})]}),(0,a.jsx)(ev,{data:u})]}),c.total>0&&(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c.completed}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:c.total-c.completed}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Remaining"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:c.total}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Total"})]})]}),l&&0===c.total&&(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)(f,{onClick:l,variant:"outline",className:"w-full",children:"\uD83D\uDD04 Start New Search"})})]})]})}var e_=t(2598),ew=t(9136),ey=t(5340);function ej(e){let{results:s}=e,{t}=I(),r=s.filter(e=>{var s;return(null===(s=e.scrapedData)||void 0===s?void 0:s.status)==="success"}).length;s.filter(e=>{var s;return(null===(s=e.scrapedData)||void 0===s?void 0:s.status)==="partial"}).length;let n=s.filter(e=>{var s;return(null===(s=e.scrapedData)||void 0===s?void 0:s.status)==="failed"||!e.scrapedData}).length,o=s.length,l=o>0?r/o*100:0,i=s.filter(e=>{var s;return(null===(s=e.scrapedData)||void 0===s?void 0:s.status)==="failed"||!e.scrapedData}).reduce((e,s)=>{var t;let a=(null===(t=s.scrapedData)||void 0===t?void 0:t.error)||s.error||"Unknown error";return a.includes("No search results")||a.includes("not found")?e.not_found=(e.not_found||0)+1:a.includes("All search strategies failed")||a.includes("strategies")?e.strategies_failed=(e.strategies_failed||0)+1:a.includes("Timeout")||a.includes("timeout")?e.timeout=(e.timeout||0)+1:e.other=(e.other||0)+1,e},{});return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(v,{className:"pb-2",children:(0,a.jsxs)(b,{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(ew.A,{className:"h-4 w-4"}),t("success_rate")]})}),(0,a.jsxs)(w,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,a.jsxs)("span",{className:l>=70?"text-green-600":l>=50?"text-yellow-600":l>=30?"text-orange-600":"text-red-600",children:[l.toFixed(1),"%"]}),(0,a.jsx)(k,{variant:l>=70?"default":l>=50?"secondary":"destructive",className:"text-xs",children:t(l>=50?"results.success_rate_good":l>=30?"results.success_rate_fair":"results.success_rate_low")})]}),(0,a.jsx)(M,{value:l,className:"mt-2"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:t("results.industry_average")})]})]}),(0,a.jsxs)(x,{children:[(0,a.jsx)(v,{className:"pb-2",children:(0,a.jsxs)(b,{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 text-green-600"}),t("successful")]})}),(0,a.jsxs)(w,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:r}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:o>0?"".concat((r/o*100).toFixed(0),"% of total"):"0% of total"}),(0,a.jsx)("div",{className:"mt-2 text-xs",children:(0,a.jsxs)("span",{className:"text-green-600",children:["✅ ",t("results.complete_data_extracted")]})})]})]}),(0,a.jsxs)(x,{children:[(0,a.jsx)(v,{className:"pb-2",children:(0,a.jsxs)(b,{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(ey.A,{className:"h-4 w-4 text-red-600"}),t("failed")]})}),(0,a.jsxs)(w,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:n}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:o>0?"".concat((n/o*100).toFixed(0),"% of total"):"0% of total"}),(0,a.jsx)("div",{className:"mt-2 text-xs",children:(0,a.jsxs)("span",{className:"text-red-600",children:["❌ ",t("results.no_data_found")]})})]})]}),(0,a.jsxs)(x,{children:[(0,a.jsx)(v,{className:"pb-2",children:(0,a.jsxs)(b,{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(em.A,{className:"h-4 w-4"}),t("table.entries")]})}),(0,a.jsxs)(w,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:o}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:t("results.businesses_searched")}),(0,a.jsx)("div",{className:"mt-2 space-y-1",children:(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{children:t("results.google_maps_queries")}),(0,a.jsx)("span",{className:"font-medium",children:o})]})})]})]}),n>0&&(0,a.jsxs)(x,{className:"md:col-span-2 lg:col-span-4",children:[(0,a.jsx)(v,{className:"pb-2",children:(0,a.jsxs)(b,{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(ey.A,{className:"h-4 w-4 text-red-600"}),t("results.error_analysis")]})}),(0,a.jsxs)(w,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[i.not_found&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-red-600",children:i.not_found}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:t("results.not_found_on_maps")})]}),i.strategies_failed&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-orange-600",children:i.strategies_failed}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:t("results.all_strategies_failed")})]}),i.timeout&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-yellow-600",children:i.timeout}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:t("timeout_errors")})]}),i.other&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-600",children:i.other}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:t("results.other_errors")})]})]}),(0,a.jsx)("div",{className:"mt-3 p-2 bg-muted rounded-md",children:(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["\uD83D\uDCA1 ",(0,a.jsx)("strong",{children:"Tip:"})," ",t("results.success_tip")]})})]})]})]})}function eN(e,s){if(!e||"object"!=typeof e)return"";for(let t of({Monday:["Monday","monday","Mon","mon"],Tuesday:["Tuesday","tuesday","Tue","tue"],Wednesday:["Wednesday","wednesday","Wed","wed"],Thursday:["Thursday","thursday","Thu","thu"],Friday:["Friday","friday","Fri","fri"],Saturday:["Saturday","saturday","Sat","sat"],Sunday:["Sunday","sunday","Sun","sun"]})[s]||[s])if(e[t])return e[t];return""}function eS(e){if(!e)return"";if(e.match(/^\d{2}:\d{2}\s*[-–]\s*\d{2}:\d{2}$/))return e;if(e.includes(","))return e.split(",").map(e=>e.trim()).map(e=>{if(e.includes("-")||e.includes("–")){let s=e.includes("–")?"–":"-",[t,a]=e.split(s).map(e=>e.trim());return"".concat(eC(t)," - ").concat(eC(a))}return e}).join(" & ");if(e.includes("-")||e.includes("–")){let s=e.includes("–")?"–":"-",[t,a]=e.split(s).map(e=>e.trim());return"".concat(eC(t)," - ").concat(eC(a))}return e}function eC(e){if(!e)return"";if(e.match(/^\d{2}:\d{2}$/))return e;if(e.match(/^\d:\d{2}$/))return"0".concat(e);if(e.toLowerCase().includes("am")||e.toLowerCase().includes("pm"))try{let[s,t]=e.toLowerCase().split(/\s*(am|pm)/),[a,r]=s.split(":").map(e=>parseInt(e)),n=a;return"pm"===t&&12!==a?n+=12:"am"===t&&12===a&&(n=0),"".concat(n.toString().padStart(2,"0"),":").concat(r.toString().padStart(2,"0"))}catch(e){}return e}function ek(e){if(!e)return"";if(e.includes(",")||e.includes('"')||e.includes("\n")||e.includes("\r")){let s=e.replace(/"/g,'""');return'"'.concat(s,'"')}return e}function eD(e,s){if(!s){let e=new Date().toISOString().slice(0,19).replace(/:/g,"-");s="scraping-results-".concat(e,".csv")}let t=function(e){if(console.log("\uD83D\uDD0D Converting to CSV, results count:",e.length),console.log("\uD83D\uDCCA Sample result:",e[0]),0===e.length)return console.warn("⚠️ No results to convert to CSV"),"";let s=["Input Name,Found Name,Address,Phone,Website,Category,Latitude,Longitude,Monday Hours,Tuesday Hours,Wednesday Hours,Thursday Hours,Friday Hours,Saturday Hours,Sunday Hours",...e.map(e=>{var s,t,a,r,n,o,l,i,c,d,u,m,p,g;return[ek(e.originalData.name||""),ek((null===(s=e.scrapedData)||void 0===s?void 0:s.fullName)||""),ek((null===(t=e.scrapedData)||void 0===t?void 0:t.fullAddress)||""),ek((null===(a=e.scrapedData)||void 0===a?void 0:a.phone)||""),ek((null===(r=e.scrapedData)||void 0===r?void 0:r.website)||""),ek((null===(n=e.scrapedData)||void 0===n?void 0:n.category)||""),ek((null===(o=e.scrapedData)||void 0===o?void 0:o.latitude)||""),ek((null===(l=e.scrapedData)||void 0===l?void 0:l.longitude)||""),ek(eS(eN(null===(i=e.scrapedData)||void 0===i?void 0:i.openingHours,"Monday"))),ek(eS(eN(null===(c=e.scrapedData)||void 0===c?void 0:c.openingHours,"Tuesday"))),ek(eS(eN(null===(d=e.scrapedData)||void 0===d?void 0:d.openingHours,"Wednesday"))),ek(eS(eN(null===(u=e.scrapedData)||void 0===u?void 0:u.openingHours,"Thursday"))),ek(eS(eN(null===(m=e.scrapedData)||void 0===m?void 0:m.openingHours,"Friday"))),ek(eS(eN(null===(p=e.scrapedData)||void 0===p?void 0:p.openingHours,"Saturday"))),ek(eS(eN(null===(g=e.scrapedData)||void 0===g?void 0:g.openingHours,"Sunday")))].join(",")})],t=s.join("\n");return console.log("\uD83D\uDCC4 Generated CSV preview:",t.substring(0,500)+"..."),console.log("\uD83D\uDCCA CSV rows count:",s.length),t}(e);if(!t){console.error("No data to export");return}let a=new Blob(["\uFEFF"+t],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){let e=URL.createObjectURL(a);r.setAttribute("href",e),r.setAttribute("download",s),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}}function eA(e){let{results:s,batchId:t,onViewResults:n,onNewSearch:o}=e,{t:l}=I(),[i,d]=(0,r.useState)(!1),u=s.filter(e=>{var s;return(null===(s=e.scrapedData)||void 0===s?void 0:s.status)==="success"}).length;s.filter(e=>{var s;return(null===(s=e.scrapedData)||void 0===s?void 0:s.status)==="partial"}).length;let m=s.filter(e=>{var s;return(null===(s=e.scrapedData)||void 0===s?void 0:s.status)==="failed"||!e.scrapedData}).length,p=s.length,g=p>0?u/p*100:0,h=async()=>{if(!t){let e=new Date().toISOString().slice(0,19).replace(/:/g,"-");eD(s,"scraping-results-".concat(e,".csv"));return}try{d(!0),await c.exportCleanCSV(t),console.log("✅ CSV exported successfully using backend endpoint")}catch(t){console.error("❌ Failed to export CSV from backend:",t);let e=new Date().toISOString().slice(0,19).replace(/:/g,"-");eD(s,"scraping-results-".concat(e,".csv"))}finally{d(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(ej,{results:s}),(0,a.jsxs)(x,{children:[(0,a.jsxs)(v,{children:[(0,a.jsxs)(b,{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"h-5 w-5 text-green-500"}),l("processing_complete")]}),(0,a.jsxs)(_,{children:[l("successfully_processed")," ",p," ",l("businesses_with")," ",g.toFixed(1),"% ",l("success_rate_with_details"),"(",u," ",l("successful"),", ",m," ",l("failed"),")"]})]}),(0,a.jsxs)(w,{className:"space-y-3",children:[(0,a.jsxs)(f,{onClick:n,size:"lg",className:"w-full",children:[(0,a.jsx)(e_.A,{className:"h-4 w-4 mr-2"}),l("view_detailed_results")]}),(0,a.jsx)(f,{onClick:h,variant:"outline",size:"lg",className:"w-full",disabled:i,children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2"}),l(t?"results.download_clean_csv":"download_csv")]})}),o&&(0,a.jsxs)(f,{onClick:o,variant:"secondary",size:"lg",className:"w-full",children:[(0,a.jsx)(D.A,{className:"h-4 w-4 mr-2"}),l("upload_another_csv")]})]})]})]})}var eE=t(1773);function eR(e){let{errorMessage:s,onRetry:t}=e,{t:r}=I();return(0,a.jsxs)(x,{className:"mb-8 border-red-200 bg-red-50",children:[(0,a.jsxs)(v,{children:[(0,a.jsxs)(b,{className:"flex items-center gap-2 text-red-700",children:[(0,a.jsx)(O.A,{className:"h-5 w-5"}),r("error.title")]}),(0,a.jsx)(_,{className:"text-red-600",children:s})]}),(0,a.jsx)(w,{children:(0,a.jsxs)(f,{onClick:t,size:"lg",className:"w-full",variant:"outline",children:[(0,a.jsx)(eE.A,{className:"h-4 w-4 mr-2"}),r("error.retry")]})})]})}var eF=t(6217),eT=t(767);let eP=eF.bL;eF.l9;let ez=eF.ZL;eF.bm;let eI=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eF.hJ,{ref:s,className:g("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});eI.displayName=eF.hJ.displayName;let eV=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(ez,{children:[(0,a.jsx)(eI,{}),(0,a.jsxs)(eF.UC,{ref:s,className:g("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[r,(0,a.jsxs)(eF.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(eT.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eV.displayName=eF.UC.displayName;let eL=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:g("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};eL.displayName="DialogHeader";let eM=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eF.hE,{ref:s,className:g("text-lg font-semibold leading-none tracking-tight",t),...r})});function eU(e){let{isOpen:s,onClose:t,data:r}=e,{t:n}=I();return(0,a.jsx)(eP,{open:s,onOpenChange:t,children:(0,a.jsxs)(eV,{className:"max-w-7xl max-h-[90vh] flex flex-col",children:[(0,a.jsx)(eL,{className:"flex-shrink-0",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(eM,{className:"text-2xl",children:[n("results.title")," (",r.length," ",n("table.entries"),")"]}),(0,a.jsxs)(f,{onClick:()=>{let e=new Date().toISOString().slice(0,19).replace(/:/g,"-");eD(r,"scraping-results-".concat(e,".csv"))},variant:"outline",size:"sm",children:[(0,a.jsx)(E.A,{className:"h-4 w-4 mr-2"}),n("download_csv")]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-auto min-h-0",children:(0,a.jsx)(ev,{data:r})})]})})}eM.displayName=eF.hE.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eF.VY,{ref:s,className:g("text-sm text-muted-foreground",t),...r})}).displayName=eF.VY.displayName;var eB=t(5996),eq=t(1836);function eO(){let[e,s]=(0,r.useState)(!1),[t,n]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{let e=async()=>{try{let e=await c.healthCheck();s(e)}catch(e){s(!1)}finally{n(!1)}};e();let t=setInterval(e,6e4);return()=>clearInterval(t)},[]),t)?(0,a.jsxs)(k,{variant:"secondary",className:"mb-4",children:[(0,a.jsx)(eB.A,{className:"h-3 w-3 mr-1 animate-pulse"}),"Checking connection..."]}):(0,a.jsx)(k,{variant:e?"default":"secondary",className:"mb-4",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eB.A,{className:"h-3 w-3 mr-1 text-green-600"}),"Backend Connected"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.A,{className:"h-3 w-3 mr-1 text-orange-600"}),"Demo Mode"]})})}var eG=t(994),eW=t(1476),eH=t(1420);function eJ(){var e,s,t,n,o,l,i;let{t:d}=I(),{language:u}=(0,P.o)(),[m,p]=(0,r.useState)({api:{status:"unhealthy",service:"api"},redis:{status:"unhealthy",service:"redis"},worker:{status:"unhealthy",service:"worker"},lastCheck:new Date().toISOString()}),[g,h]=(0,r.useState)(!1),_=async()=>{h(!0);try{let e=await c.checkServicesStatus();p(e)}catch(e){console.error("Error checking services:",e),p({api:{status:"unhealthy",service:"api"},redis:{status:"unhealthy",service:"redis"},worker:{status:"unhealthy",service:"worker"},lastCheck:new Date().toISOString(),error:"Error conectando con el backend"})}h(!1)};(0,r.useEffect)(()=>{_();let e=setInterval(_,3e4);return()=>clearInterval(e)},[]);let y=(e,s,t)=>{if(!e)return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ey.A,{className:"h-4 w-4 text-gray-400"}),"API"===s&&(0,a.jsx)(eG.A,{className:"h-4 w-4 text-muted-foreground"}),"Redis"===s&&(0,a.jsx)(eW.A,{className:"h-4 w-4 text-muted-foreground"}),"Worker"===s&&(0,a.jsx)(eH.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:s}),t&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[":",t]})]})]}),(0,a.jsx)(k,{variant:"secondary",className:"text-xs",children:"Unknown"})]});let r="healthy"===e.status,n="degraded"===e.status;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 rounded border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[r?(0,a.jsx)(A.A,{className:"h-4 w-4 text-green-600"}):n?(0,a.jsx)(O.A,{className:"h-4 w-4 text-yellow-600"}):(0,a.jsx)(ey.A,{className:"h-4 w-4 text-red-600"}),"API"===s&&(0,a.jsx)(eG.A,{className:"h-4 w-4 text-muted-foreground"}),"Redis"===s&&(0,a.jsx)(eW.A,{className:"h-4 w-4 text-muted-foreground"}),"Worker"===s&&(0,a.jsx)(eH.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium",children:s}),t&&(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[":",t]})]})]}),(0,a.jsx)(k,{variant:r?"default":n?"secondary":"destructive",className:"text-xs",children:r?d("status.connected"):n?d("status.degraded"):d("status.disconnected")})]})};return(0,a.jsxs)(x,{className:"w-full max-w-md",children:[(0,a.jsx)(v,{className:"pb-3",children:(0,a.jsxs)(b,{className:"text-sm flex items-center justify-between",children:[d("backend_services_status"),(0,a.jsx)(f,{variant:"ghost",size:"sm",onClick:_,disabled:g,children:(0,a.jsx)(eE.A,{className:"h-4 w-4 ".concat(g?"animate-spin":"")})})]})}),(0,a.jsxs)(w,{className:"space-y-3",children:[y(m.api,"API","3000"),y(m.redis,"Redis","6379"),y(m.worker,"Worker"),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[d("status.last_check")," ",(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/1e3);return t<60?d("time.seconds_ago",{seconds:t}):t<3600?d("time.minutes_ago",{minutes:Math.floor(t/60)}):s.toLocaleTimeString({en:"en-US",de:"de-DE",fr:"fr-FR",it:"it-IT"}[u]||"en-US",{hour:"2-digit",minute:"2-digit"})})(m.lastCheck)]}),m.error&&(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded text-xs text-red-700",children:[(0,a.jsx)(O.A,{className:"h-4 w-4"}),m.error||d("status.error_connecting")]}),(null===(e=m.api)||void 0===e?void 0:e.status)!=="healthy"&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground p-2 bg-muted rounded",children:["\uD83D\uDCA1 ",d("status.start_backend_instruction")," ",(0,a.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"docker-compose up --build -d"})]}),(null===(s=m.api)||void 0===s?void 0:s.status)==="healthy"&&((null===(t=m.redis)||void 0===t?void 0:t.status)!=="healthy"||(null===(n=m.worker)||void 0===n?void 0:n.status)!=="healthy")&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground p-2 bg-yellow-50 border border-yellow-200 rounded",children:["⚠️ ",d("status.partial_services")]}),(null===(o=m.api)||void 0===o?void 0:o.status)==="healthy"&&(null===(l=m.redis)||void 0===l?void 0:l.status)==="healthy"&&(null===(i=m.worker)||void 0===i?void 0:i.status)==="healthy"&&(0,a.jsxs)("div",{className:"text-xs text-green-700 p-2 bg-green-50 border border-green-200 rounded",children:["✅ ",d("status.all_services_ok")]})]})]})}var eZ=t(4471),eK=t(3565);let e$=eZ.bL,eQ=eZ.l9;eZ.YJ,eZ.ZL,eZ.Pb,eZ.z6,r.forwardRef((e,s)=>{let{className:t,inset:r,children:n,...o}=e;return(0,a.jsxs)(eZ.ZP,{ref:s,className:g("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...o,children:[n,(0,a.jsx)(eh.A,{className:"ml-auto h-4 w-4"})]})}).displayName=eZ.ZP.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eZ.G5,{ref:s,className:g("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=eZ.G5.displayName;let eX=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(eZ.ZL,{children:(0,a.jsx)(eZ.UC,{ref:s,sideOffset:r,className:g("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});eX.displayName=eZ.UC.displayName;let eY=r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(eZ.q7,{ref:s,className:g("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...n})});eY.displayName=eZ.q7.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,checked:n,...o}=e;return(0,a.jsxs)(eZ.H_,{ref:s,className:g("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...o,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eZ.VF,{children:(0,a.jsx)(es.A,{className:"h-4 w-4"})})}),r]})}).displayName=eZ.H_.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(eZ.hN,{ref:s,className:g("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eZ.VF,{children:(0,a.jsx)(eK.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=eZ.hN.displayName,r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(eZ.JU,{ref:s,className:g("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n})}).displayName=eZ.JU.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eZ.wv,{ref:s,className:g("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=eZ.wv.displayName;var e0=t(6122);let e1=[{code:"en",name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"fr",name:"Fran\xe7ais",flag:"\uD83C\uDDEB\uD83C\uDDF7"},{code:"de",name:"Deutsch",flag:"\uD83C\uDDE9\uD83C\uDDEA"},{code:"it",name:"Italiano",flag:"\uD83C\uDDEE\uD83C\uDDF9"}];function e2(e){let{className:s}=e,{language:t,setLanguage:r}=(0,P.o)(),{t:n}=I(),o=e1.find(e=>e.code===t)||e1[0];return(0,a.jsxs)(e$,{children:[(0,a.jsx)(eQ,{asChild:!0,children:(0,a.jsxs)(f,{variant:"outline",size:"sm",className:"gap-2 ".concat(s),"aria-label":n("language_selector"),children:[(0,a.jsx)(e0.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-lg",children:o.flag}),(0,a.jsx)("span",{className:"hidden sm:inline",children:o.name}),(0,a.jsx)(Y.A,{className:"h-3 w-3"})]})}),(0,a.jsx)(eX,{align:"end",className:"min-w-[150px]",children:e1.map(e=>(0,a.jsxs)(eY,{onClick:()=>r(e.code),className:"gap-3 cursor-pointer ".concat(t===e.code?"bg-accent":""),children:[(0,a.jsx)("span",{className:"text-lg",children:e.flag}),(0,a.jsx)("span",{children:e.name})]},e.code))})]})}function e4(){let[e,s]=(0,r.useState)("idle"),[t,n]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[i,d]=(0,r.useState)({completed:0,total:0}),[u,m]=(0,r.useState)([]),[p,g]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[x,v]=(0,r.useState)(!0),{t:b}=I();(0,r.useEffect)(()=>{let e=localStorage.getItem("currentBatchId"),t=localStorage.getItem("currentStatus");e&&"processing"===t&&(console.log("\uD83D\uDD04 Restoring session for batch:",e),l(e),s("processing"),c.getBatchStatus(e).then(e=>{console.log("\uD83D\uDCCA Restored batch status:",e),e.progress&&d({completed:e.progress.completed,total:e.progress.total})}).catch(e=>{console.error("❌ Failed to restore batch status:",e)})),v(!1)},[]),(0,r.useEffect)(()=>{o?localStorage.setItem("currentBatchId",o):localStorage.removeItem("currentBatchId"),"idle"!==e?localStorage.setItem("currentStatus",e):localStorage.removeItem("currentStatus")},[o,e]);let _=(0,r.useCallback)(e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];t&&"text/csv"===t.type?(n(t),g(""),m([]),d({completed:0,total:0})):t&&g(b("error.upload"))},[b]),w=(0,r.useCallback)(async()=>{if(t){s("uploading"),g("");try{console.log("\uD83D\uDE80 Starting upload process for:",t.name);let e=await c.uploadFile(t);console.log("Upload successful, batch ID:",e.batchId,"Jobs created:",e.jobsCreated),l(e.batchId),d({completed:0,total:e.jobsCreated||0}),s("processing")}catch(e){console.error("Upload failed:",e),g(e.message||b("error.upload")),s("error")}}},[t,b]),y=(0,r.useCallback)((e,s)=>{console.log("\uD83D\uDCCA Progress update:",e,"/",s),d({completed:e,total:s})},[]),j=(0,r.useCallback)(async e=>{if(console.log("✅ Processing completed, fetching final results...",e),e&&d({completed:e.completed,total:e.total}),o)try{let t=await c.getBatchStatus(o);t.results?(m(t.results),s("complete"),!e&&t.progress&&d({completed:t.progress.completed,total:t.progress.total})):(g(b("error.processing")),s("error"))}catch(e){console.error("Failed to fetch final results:",e),g(e.message||b("error.processing")),s("error")}else s("complete")},[o,b]),N=(0,r.useCallback)(()=>{f(!0)},[]),S=(0,r.useCallback)(()=>{f(!1)},[]),C=(0,r.useCallback)(()=>{console.log("\uD83D\uDD04 Retrying - clearing session"),localStorage.removeItem("currentBatchId"),localStorage.removeItem("currentStatus"),s("idle"),g(""),l(null),d({completed:0,total:0}),m([])},[]),k=(0,r.useCallback)(()=>{console.log("\uD83D\uDD04 Starting new search - clearing session"),localStorage.removeItem("currentBatchId"),localStorage.removeItem("currentStatus"),window.location.reload()},[]);return(0,a.jsxs)("div",{className:"min-h-screen bg-background p-4",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(e2,{})}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground mb-4",children:b("title")}),(0,a.jsx)("p",{className:"text-xl text-muted-foreground",children:b("subtitle")})]}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)(eO,{}),(0,a.jsx)(eJ,{})]}),(()=>{switch(e){case"idle":case"uploading":return(0,a.jsx)(V,{file:t,onFileChange:_,onProcessFile:w,isDisabled:"uploading"===e});case"processing":return(0,a.jsx)(eb,{batchId:o,progress:i,onProgressUpdate:y,onComplete:j,onNewSearch:k});case"complete":return(0,a.jsx)(eA,{results:u,batchId:o||void 0,onViewResults:N,onNewSearch:k});case"error":return(0,a.jsx)(eR,{errorMessage:p,onRetry:C});default:return null}})(),(0,a.jsx)(eU,{isOpen:h,onClose:S,data:u})]})]})}},579:(e,s,t)=>{"use strict";t.d(s,{LanguageProvider:()=>o,o:()=>l});var a=t(5155),r=t(2115);let n=(0,r.createContext)(void 0);function o(e){let{children:s}=e,[t,o]=(0,r.useState)("en");return(0,a.jsx)(n.Provider,{value:{language:t,setLanguage:o},children:s})}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}}},e=>{var s=s=>e(e.s=s);e.O(0,[959,441,517,358],()=>s(1709)),_N_E=e.O()}]);